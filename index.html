<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Matific – Evaluación (McCall, Boehm, FURPS)</title>
<style>
  :root{--fg:#0f172a;--muted:#475569;--card:#ffffff;--brand:#2563eb}
  *{box-sizing:border-box}
  html,body{
    margin:0;
    height:100%;
    background: linear-gradient(135deg, #dbeafe 0%, #f8fafc 40%, #ffffff 100%);
    background-attachment: fixed;
    color:var(--fg);
    font-family:system-ui,Segoe UI,Roboto,sans-serif;
  }
  header{
    background:#fff;
    border-bottom:1px solid #e2e8f0;
  }
  .wrap{max-width:1080px;margin:0 auto;padding:18px 20px}
  h1{margin:0 0 6px 0}
  .sub{color:var(--muted);margin:0 0 10px 0}
  section{background:var(--card);border:1px solid #e2e8f0;border-radius:16px;padding:18px;margin:16px 0;box-shadow:0 4px 12px rgba(15,23,42,.08)}
  .row{display:grid;grid-template-columns:1fr;gap:14px}
  .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid #cbd5e1;background:#fff;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer;transition:all .2s}
  .btn:hover{transform:translateY(-2px);box-shadow:0 2px 6px rgba(0,0,0,.1)}
  .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
  .muted{color:var(--muted)}
  .pill{border:1px solid #e2e8f0;border-radius:999px;padding:2px 8px;background:#f1f5f9;font-size:12px}
  .toolbar{display:flex;flex-wrap:wrap;gap:8px}
  .viewer{border:1px solid #e2e8f0;border-radius:12px;overflow:hidden;background:#fff}
  .viewer-head{display:flex;gap:8px;flex-wrap:wrap;align-items:center;padding:10px;border-bottom:1px solid #e2e8f0;background:#f8fafc}
  input[type="url"],input[type="file"]{padding:8px;border:1px solid #cbd5e1;border-radius:10px;background:#fff}
  input[type="url"]{min-width:260px;flex:1}
  iframe{width:100%;height:70vh;border:0}
  textarea{width:100%;min-height:120px;padding:12px;border:1px solid #cbd5e1;border-radius:12px;background:#fff}
  .grid2{display:grid;grid-template-columns:1fr;gap:12px}
  @media (min-width:880px){.grid2{grid-template-columns:1fr 1fr}}
  footer{color:var(--muted);padding:24px 0;text-align:center}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Matific — Evaluación de Calidad</h1>
    <p class="sub">Evaluación de Matific mediante los modelos McCall, Boehm y FURPS.</p>
    <div class="toolbar">
      <button class="btn" id="btnExport">Exportar conclusiones (.json)</button>
      <label class="btn">
        Importar conclusiones
        <input id="importJson" type="file" accept="application/json" style="display:none">
      </label>
    </div>
  </div>
</header>

<main class="wrap">

  <!-- McCall -->
  <section id="sec-mccall">
    <div class="grid2">
      <div>
        <h2>McCall</h2>
        <div class="toolbar">
          <button class="btn primary" data-open="mccall">Abrir PDF McCall</button>
          <button class="btn" data-toggle-viewer="mccall">Ver/Cargar aquí</button>
        </div>
        <p class="muted">Por defecto abre <code>mccall.pdf</code>. También puedes usar el visor con una URL o archivo local.</p>
      </div>
      <div>
        <h3>Conclusiones — McCall (Matific)</h3>
        <textarea id="concl-mccall" placeholder="Escribe las conclusiones de McCall..."></textarea>
      </div>
    </div>
    <div id="viewer-mccall" class="viewer" hidden>
      <div class="viewer-head">
        <input type="url" placeholder="URL del PDF" data-url="mccall">
        <input type="file" accept="application/pdf" data-file="mccall">
        <button class="btn" data-load="mccall">Cargar</button>
      </div>
      <iframe data-frame="mccall"></iframe>
    </div>
  </section>

  <!-- Boehm -->
  <section id="sec-boehm">
    <div class="grid2">
      <div>
        <h2>Boehm</h2>
        <div class="toolbar">
          <button class="btn primary" data-open="boehm">Abrir PDF Boehm</button>
          <button class="btn" data-toggle-viewer="boehm">Ver/Cargar aquí</button>
        </div>
        <p class="muted">Por defecto abre <code>boehm.pdf</code>. Usa el visor si lo necesitas.</p>
      </div>
      <div>
        <h3>Conclusiones — Boehm (Matific)</h3>
        <textarea id="concl-boehm" placeholder="Escribe las conclusiones de Boehm..."></textarea>
      </div>
    </div>
    <div id="viewer-boehm" class="viewer" hidden>
      <div class="viewer-head">
        <input type="url" placeholder="URL del PDF" data-url="boehm">
        <input type="file" accept="application/pdf" data-file="boehm">
        <button class="btn" data-load="boehm">Cargar</button>
      </div>
      <iframe data-frame="boehm"></iframe>
    </div>
  </section>

  <!-- FURPS -->
  <section id="sec-furps">
    <div class="grid2">
      <div>
        <h2>FURPS</h2>
        <div class="toolbar">
          <button class="btn primary" data-open="furps">Abrir PDF FURPS</button>
          <button class="btn" data-toggle-viewer="furps">Ver/Cargar aquí</button>
        </div>
        <p class="muted">Por defecto abre <code>furps.pdf</code>. Usa el visor para otra fuente.</p>
      </div>
      <div>
        <h3>Conclusiones — FURPS (Matific)</h3>
        <textarea id="concl-furps" placeholder="Escribe las conclusiones de FURPS..."></textarea>
      </div>
    </div>
    <div id="viewer-furps" class="viewer" hidden>
      <div class="viewer-head">
        <input type="url" placeholder="URL del PDF" data-url="furps">
        <input type="file" accept="application/pdf" data-file="furps">
        <button class="btn" data-load="furps">Cargar</button>
      </div>
      <iframe data-frame="furps"></iframe>
    </div>
  </section>

</main>

<footer>
  <div class="wrap">
    <small class="muted">Universidad de La Guajira — Ingeniería de Sistemas — Proyecto Matific (McCall, Boehm, FURPS)</small>
  </div>
</footer>

<script>
['mccall','boehm','furps'].forEach(key=>{
  document.querySelector(`[data-open="${key}"]`).addEventListener('click', ()=> window.open(`${key}.pdf`, '_blank'));
  document.querySelector(`[data-toggle-viewer="${key}"]`).addEventListener('click', ()=>{
    const box=document.getElementById(`viewer-${key}`);
    box.hidden=!box.hidden;
  });
  const btnLoad=document.querySelector(`[data-load="${key}"]`);
  const urlInput=document.querySelector(`[data-url="${key}"]`);
  const fileInput=document.querySelector(`[data-file="${key}"]`);
  const frame=document.querySelector(`[data-frame="${key}"]`);
  btnLoad.addEventListener('click', ()=>{
    const url=urlInput.value.trim();
    if(url){ frame.src=url; return; }
    if(fileInput.files && fileInput.files[0]){
      frame.src=URL.createObjectURL(fileInput.files[0]);
      return;
    }
    alert('Pega una URL o selecciona un archivo PDF');
  });
});
// Guardar conclusiones local
['mccall','boehm','furps'].forEach(k=>{
  const ta=document.getElementById(`concl-${k}`);
  ta.value=localStorage.getItem('matific_concl_'+k)||'';
  ta.addEventListener('input', ()=> localStorage.setItem('matific_concl_'+k, ta.value));
});
</script>
</body>
</html>
